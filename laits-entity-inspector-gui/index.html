<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lait's Entity Inspector</title>
    <link rel="stylesheet" href="style.css">
    <!-- CodeMirror 5 for JSON editing -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.18/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.18/addon/fold/foldgutter.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.18/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.18/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.18/addon/edit/matchbrackets.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.18/addon/edit/closebrackets.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.18/addon/fold/foldcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.18/addon/fold/foldgutter.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.18/addon/fold/brace-fold.min.js"></script>
</head>
<body>
    <div class="scanlines"></div>
    <div class="noise"></div>

    <div class="container">
        <!-- Version Banner (for update notifications) -->
        <div class="version-banner" id="version-banner"></div>

        <!-- Header -->
        <header class="header" id="header">
            <div class="header-logo-section" id="header-logo-section">
                <span class="header-toggle" id="header-toggle">&#9660;</span>
                <pre class="logo" id="logo">
╔═════════════════════════════════════════════════════════════════════╗
║  ███████╗███╗   ██╗████████╗██╗████████╗██╗   ██╗                   ║
║  ██╔════╝████╗  ██║╚══██╔══╝██║╚══██╔══╝╚██╗ ██╔╝                   ║
║  █████╗  ██╔██╗ ██║   ██║   ██║   ██║    ╚████╔╝                    ║
║  ██╔══╝  ██║╚██╗██║   ██║   ██║   ██║     ╚██╔╝                     ║
║  ███████╗██║ ╚████║   ██║   ██║   ██║      ██║                      ║
║  ╚══════╝╚═╝  ╚═══╝   ╚═╝   ╚═╝   ╚═╝      ╚═╝   I N S P E C T O R  ║
╚═════════════════════════════════════════════════════════════════════╝</pre>
                <span class="header-collapsed-title" id="header-collapsed-title">LAIT'S ENTITY INSPECTOR</span>
            </div>
            <button class="info-btn global-info-btn" id="global-help-btn" title="Help">i</button>
            <div class="status-bar">
                <div class="status-item">
                    <span class="label">STATUS:</span>
                    <span id="connection-status" class="status disconnected">● DISCONNECTED</span>
                </div>
                <div class="status-item">
                    <span class="label">ENTITIES:</span>
                    <span id="entity-count" class="value">0</span>
                </div>
                <div class="status-item">
                    <span class="label">WORLD:</span>
                    <span id="world-name" class="value">---</span>
                </div>
                <div class="status-item">
                    <span class="label">UPTIME:</span>
                    <span id="uptime" class="value">00:00:00</span>
                </div>
            </div>
        </header>

        <!-- Tab Bar -->
        <div class="tab-bar">
            <button class="tab-btn active" data-tab="entities">[E] ENTITIES</button>
            <button class="tab-btn" data-tab="assets">[A] ASSETS</button>
            <button class="tab-btn" data-tab="alarms">[⏰] ALARMS</button>
        </div>


        <!-- Tab Content: Entities -->
        <div class="tab-content active" id="tab-entities">
        <!-- Main Content -->
        <main class="main">
            <!-- Entity List Panel -->
            <section class="panel entity-list-panel" id="entity-list-panel">
                <div class="panel-header">
                    <span class="panel-title">┌─[ ENTITY LIST ]─────────────────────────┐</span>
                    <span class="header-spacer"></span>
                    <button class="panel-pause-btn paused" id="entity-list-pause-btn" title="Pause/Resume Entity Updates">
                        <span id="entity-list-pause-icon">▶</span>
                        <span id="entity-list-pause-label">PLAY</span>
                    </button>
                    <button class="info-btn" data-info="entity-list" title="Entity List Help">i</button>
                </div>
                <div class="search-box">
                    <span class="prompt">&gt;</span>
                    <input type="text" id="search-input" placeholder="FILTER: type or model..." autocomplete="off">
                    <span class="cursor">█</span>
                </div>
                <div class="entity-list-header">
                    <span class="col-id">ID</span>
                    <span class="col-type">TYPE</span>
                    <span class="col-model">MODEL</span>
                    <span class="col-pos">POSITION</span>
                    <span class="col-surname">SURNAME</span>
                    <span class="col-actions">ACT</span>
                </div>
                <div id="entity-list" class="entity-list">
                    <div class="empty-state">
                        <pre>
    ░░░░░░░░░░░░░░░░░░░░░
    ░  NO ENTITIES YET  ░
    ░   WAITING FOR     ░
    ░    CONNECTION     ░
    ░░░░░░░░░░░░░░░░░░░░░
                        </pre>
                    </div>
                </div>
                <div class="panel-footer">└─────────────────────────────────────────┘</div>
            </section>

            <!-- Resize Handle -->
            <div class="resize-handle" id="resize-handle"></div>

            <!-- Inspector Panel -->
            <section class="panel inspector-panel" id="inspector-panel">
                <div class="panel-header">
                    <span class="panel-title">┌─[ COMPONENT INSPECTOR ]─────────────────┐</span>
                    <span class="header-spacer"></span>
                    <label class="font-scale-control" title="Font scale">
                        <span class="font-scale-label">A</span>
                        <input type="range" id="inspector-font-scale" min="90" max="150" step="10" value="100">
                        <span class="font-scale-value" id="inspector-font-scale-value">100%</span>
                    </label>
                    <button class="copy-btn" id="inspector-fullscreen-btn" title="Toggle Fullscreen">⤢</button>
                    <button class="panel-pause-btn paused" id="inspector-pause-btn-header" title="Pause/Resume Component Updates">
                        <span id="inspector-pause-icon-header">▶</span>
                        <span id="inspector-pause-label-header">PLAY</span>
                    </button>
                    <button class="copy-btn" id="inspector-copy-btn" title="Copy as JSON">&#128203;</button>
                    <button class="info-btn" data-info="inspector" title="Inspector Help">i</button>
                </div>
                <div class="component-filter-box">
                    <span class="prompt">⚙</span>
                    <input type="text" id="component-filter" placeholder="FILTER: interaction, action, npc..." autocomplete="off">
                </div>
                <div id="inspector-content" class="inspector-content">
                    <div class="empty-state">
                        <pre>
    ╔════════════════════╗
    ║  SELECT AN ENTITY  ║
    ║   TO INSPECT ITS   ║
    ║    COMPONENTS      ║
    ╚════════════════════╝
                        </pre>
                    </div>
                </div>
                <div class="panel-footer">└─────────────────────────────────────────┘</div>
            </section>

        </main>
        </div><!-- /tab-entities -->

        <!-- Tab Content: Assets -->
        <div class="tab-content" id="tab-assets">
            <div class="assets-layout">
                <!-- Left: Asset Browser (Tree) -->
                <section class="panel asset-browser-panel">
                    <div class="panel-header">
                        <span class="panel-title">┌─[ ASSET BROWSER ]───────────┐</span>
                        <button class="info-btn" data-info="asset-browser" title="Asset Browser Help">i</button>
                    </div>
                    <div class="search-box">
                        <span class="prompt">/</span>
                        <input type="text" id="asset-filter" placeholder="Search assets..." autocomplete="off">
                        <button class="refresh-assets-btn" id="refresh-assets-btn" title="Refresh Assets">↻ REFRESH</button>
                    </div>
                    <div class="asset-tree" id="asset-tree">
                        <div class="empty-state">
                            <pre>Loading assets...</pre>
                        </div>
                    </div>
                </section>

                <!-- Resize Handle -->
                <div class="resize-handle" id="asset-resize-handle"></div>

                <!-- Center: Asset Detail -->
                <section class="panel asset-detail-panel">
                    <div class="panel-header">
                        <span class="panel-title">┌─[ ASSET DETAIL ]────────────┐</span>
                        <span class="header-spacer"></span>
                        <button class="refresh-asset-btn hidden" id="refresh-asset-btn" title="Refresh Asset">↻</button>
                        <button class="patch-btn hidden" id="patch-btn" title="Create Patch">PATCH</button>
                        <button class="info-btn" data-info="asset-detail" title="Asset Detail Help">i</button>
                    </div>
                    <div class="asset-detail" id="asset-detail">
                        <div class="empty-state">
                            <pre>Select an asset to view details</pre>
                        </div>
                    </div>
                </section>

                <!-- Right: History Sidebar -->
                <aside class="history-sidebar">
                    <div class="sidebar-header">HISTORY <span class="header-spacer"></span><button class="info-btn small" data-info="history" title="History Help">i</button></div>
                    <div class="history-list" id="history-list">
                        <div class="empty-state small">
                            <pre>No patches yet</pre>
                        </div>
                    </div>
                </aside>
            </div>
        </div><!-- /tab-assets -->

        <!-- Tab Content: Alarms -->
        <div class="tab-content" id="tab-alarms">
            <section class="panel alarms-panel-section">
                <div class="panel-header">
                    <span class="panel-title">┌─[ WORLD ALARMS ]────────────────────────┐</span>
                    <span class="header-spacer"></span>
                    <button class="control-btn" id="alarms-refresh-btn" title="Refresh Alarms">↻ REFRESH</button>
                    <button class="info-btn" data-info="alarms" title="Alarms Help">i</button>
                </div>
                <div class="alarms-toolbar">
                    <input type="text" id="alarms-filter" class="filter-input" placeholder="Filter by name or ID...">
                    <div class="sort-buttons">
                        <span class="sort-label">Sort:</span>
                        <button class="sort-btn active" data-sort="name" title="Sort by name">Name</button>
                        <button class="sort-btn" data-sort="id" title="Sort by ID">ID</button>
                        <button class="sort-btn" data-sort="ready" title="Sort by SET alarms first">Ready</button>
                    </div>
                    <button class="control-btn" id="time-debug-toggle" title="Toggle Time Debug">DEBUG</button>
                </div>
                <!-- Time Debug Panel (collapsible) -->
                <div class="time-debug-panel hidden" id="time-debug-panel">
                    <div class="debug-row"><span class="debug-label">gameTimeEpochMilli:</span><span id="debug-gameTimeEpochMilli">-</span></div>
                    <div class="debug-row"><span class="debug-label">gameTimeReceivedAt:</span><span id="debug-gameTimeReceivedAt">-</span></div>
                    <div class="debug-row"><span class="debug-label">gameTimeRate:</span><span id="debug-gameTimeRate">-</span></div>
                    <div class="debug-row"><span class="debug-label">elapsedRealMs:</span><span id="debug-elapsedRealMs">-</span></div>
                    <div class="debug-row"><span class="debug-label">elapsedGameMs:</span><span id="debug-elapsedGameMs">-</span></div>
                    <div class="debug-row"><span class="debug-label">currentGameTime:</span><span id="debug-currentGameTime">-</span></div>
                    <div class="debug-row"><span class="debug-label">currentGameTimeISO:</span><span id="debug-currentGameTimeISO">-</span></div>
                </div>
                <div class="alarms-panel" id="alarms-panel">
                    <div class="empty-state">
                        <pre>
    ╔════════════════════════════════╗
    ║  NO ACTIVE ALARMS IN WORLD    ║
    ╚════════════════════════════════╝
                        </pre>
                    </div>
                </div>
                <div class="panel-footer">└─────────────────────────────────────────┘</div>
            </section>
        </div><!-- /tab-alarms -->

        <!-- Packet Log Panel (collapsible bottom panel) -->
        <section class="panel packet-log-panel" id="packet-log-panel">
            <div class="packet-log-header" id="packet-log-header">
                <span class="panel-title">
                    <span class="toggle-arrow" id="packet-log-toggle">&#9660;</span>
                    [ PACKET LOG ]
                </span>
                <span class="header-spacer"></span>
                <div class="packet-log-controls">
                    <input type="text" id="packet-filter-input" placeholder="Filter packets..." autocomplete="off">
                    <select id="packet-direction-filter">
                        <option value="all">All</option>
                        <option value="inbound">Inbound</option>
                        <option value="outbound">Outbound</option>
                    </select>
                    <button class="control-btn" id="packet-fullscreen-btn" title="Toggle Fullscreen (F)">⤢</button>
                    <button class="control-btn packet-pause-btn active" id="packet-pause-btn" title="Pause/Resume">
                        <span id="packet-pause-icon">▶</span>
                        <span id="packet-pause-label">PLAY</span>
                    </button>
                    <button class="control-btn" id="packet-clear-btn" title="Clear Log">X</button>
                    <span class="packet-count" id="packet-count">0 packets</span>
                </div>
                <button class="info-btn small" data-info="packets" title="Packet Log Help">i</button>
            </div>
            <div class="packet-log-body" id="packet-log-body">
                <div class="packet-list" id="packet-list">
                    <div class="empty-state">
                        <pre>Waiting for packets...</pre>
                    </div>
                </div>
                <div class="packet-detail" id="packet-detail">
                    <div class="empty-state">
                        <pre>Click a packet to view details</pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- Live Changes Panel -->
        <section class="panel live-changes-panel" id="live-changes-panel">
            <div class="live-changes-header">
                <span class="panel-title">[ LIVE CHANGES ]</span>
                <span class="header-spacer"></span>
                <div class="live-filters">
                    <input type="text" id="live-filter-entity" placeholder="Entity..." class="mini-filter" autocomplete="off">
                    <input type="text" id="live-filter-id" placeholder="ID..." class="mini-filter" autocomplete="off">
                    <input type="text" id="live-filter-component" placeholder="Component..." class="mini-filter" autocomplete="off">
                </div>
                <button class="panel-pause-btn paused" id="live-changes-pause-btn" title="Pause/Resume Live Changes">
                    <span id="live-changes-pause-icon">▶</span>
                    <span id="live-changes-pause-label">PLAY</span>
                </button>
                <button class="control-btn" id="live-changes-clear-btn" title="Clear">X</button>
                <button class="info-btn small" data-info="live" title="Live Changes Help">i</button>
            </div>
            <div class="live-changes-content" id="live-changes-content">
                <div class="empty-state small">
                    <pre>Paused - Click PLAY to start tracking</pre>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-left">
                <span class="made-by">Made by Lait</span>
                <span class="footer-separator">|</span>
                <span class="version-info" id="version-info"></span>
                <span class="footer-separator">|</span>
                <span class="key">[E]</span> Entities
                <span class="key">[A]</span> Assets
                <span class="key">[W]</span> Alarms
                <span class="key">[P]</span> Packets
                <span class="key">[S]</span> Settings
            </div>
            <div class="footer-center">
                <button class="pause-btn active" id="global-pause-btn" title="Pause/Resume All Updates (Space)">
                    <span id="global-pause-icon">▶</span>
                    <span id="global-pause-label">RESUME ALL</span>
                </button>
                <button class="toggle-panel-btn active" id="toggle-packets-btn" title="Toggle Packet Log Panel">PACKETS</button>
                <button class="toggle-panel-btn active" id="toggle-live-btn" title="Toggle Live Changes Panel">LIVE</button>
            </div>
            <div class="footer-right">
                <button class="settings-toggle-btn" id="settings-toggle-btn" title="Settings">&#9881;</button>
                <div class="theme-selector">
                    <label for="theme-select">Theme:</label>
                    <select id="theme-select">
                        <option value="terminal">Terminal</option>
                        <option value="standard">Standard</option>
                        <option value="light">Light</option>
                    </select>
                </div>
                <span id="last-update">Last update: ---</span>
            </div>
        </footer>
    </div>

    <!-- Event Log (hidden by default, toggle with L) -->
    <div id="event-log" class="event-log hidden">
        <div class="log-header">┌─[ EVENT LOG ]─┐</div>
        <div id="log-content" class="log-content"></div>
    </div>

    <!-- Patch Editor Modal -->
    <div id="patch-modal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-panel patch-modal-panel">
            <div class="modal-header">
                <span class="modal-title">┌─[ CREATE PATCH ]────────────────────────┐</span>
                <div class="mode-toggle">
                    <button class="mode-btn active" data-mode="diff">Diff</button>
                    <button class="mode-btn" data-mode="json">JSON</button>
                </div>
                <button class="modal-close" id="patch-modal-close">&times;</button>
            </div>

            <div class="modal-body">
                <!-- Patch Configuration -->
                <div class="patch-config">
                    <div class="config-row">
                        <label>BaseAssetPath:</label>
                        <input type="text" id="patch-base-path" placeholder="NPC/Roles/Cow.json">
                        <button class="test-btn" id="test-wildcard-btn" title="Test Wildcard">Test</button>
                    </div>
                    <div class="config-row" id="wildcard-matches-row" style="display:none;">
                        <label>Matches:</label>
                        <select id="wildcard-matches"></select>
                    </div>
                    <div class="config-row">
                        <label>Operation:</label>
                        <select id="patch-operation">
                            <option value="merge">merge (default)</option>
                            <option value="replace">replace</option>
                            <option value="add">add</option>
                            <option value="remove">remove</option>
                            <option value="upsert">upsert</option>
                        </select>
                    </div>
                </div>

                <!-- Diff Mode Editor -->
                <div class="patch-editor diff-mode" id="patch-editor-diff">
                    <div class="editor-pane original-pane">
                        <div class="pane-header">
                            <span>ORIGINAL (read-only)</span>
                            <button class="refresh-editor-btn" id="refresh-original-btn" title="Refresh from server">↻</button>
                        </div>
                        <pre id="original-json" class="json-view"></pre>
                    </div>
                    <div class="editor-resize-handle" id="editor-resize-handle"></div>
                    <div class="editor-pane modified-pane">
                        <div class="pane-header">
                            <span>MODIFIED</span>
                            <div class="editor-toggles">
                                <button class="editor-toggle active" id="toggle-guides" title="Toggle indent guides">⋮</button>
                                <button class="editor-toggle active" id="toggle-brackets" title="Toggle bracket matching">{ }</button>
                                <button class="editor-toggle active" id="toggle-fold" title="Toggle code folding">▼</button>
                            </div>
                        </div>
                        <div class="json-editor-container" id="modified-json-container">
                            <textarea id="modified-json" class="json-edit" spellcheck="false"></textarea>
                        </div>
                    </div>
                </div>

                <!-- JSON Mode Editor -->
                <div class="patch-editor json-mode hidden" id="patch-editor-json">
                    <div class="editor-pane full-width">
                        <div class="pane-header">
                            <span>PATCH JSON</span>
                            <div class="editor-toggles">
                                <button class="editor-toggle active" id="toggle-guides-direct" title="Toggle indent guides">⋮</button>
                                <button class="editor-toggle active" id="toggle-brackets-direct" title="Toggle bracket matching">{ }</button>
                                <button class="editor-toggle active" id="toggle-fold-direct" title="Toggle code folding">▼</button>
                            </div>
                        </div>
                        <div class="json-editor-container" id="direct-json-container">
                            <textarea id="direct-json" class="json-edit" spellcheck="false" placeholder='{"BaseAssetPath": "...", "Health": 150}'></textarea>
                        </div>
                    </div>
                </div>

                <!-- Generated Patch Preview -->
                <div class="patch-preview">
                    <div class="pane-header">GENERATED PATCH</div>
                    <pre id="patch-preview" class="json-view"></pre>
                </div>
            </div>

            <div class="modal-footer">
                <div class="filename-row">
                    <label>Filename:</label>
                    <input type="text" id="patch-filename" placeholder="MyPatch.json">
                </div>
                <div class="draft-status" id="draft-status"></div>
                <div class="modal-actions">
                    <button class="modal-btn secondary" id="save-draft-btn">Save Draft</button>
                    <button class="modal-btn primary" id="publish-btn">Publish</button>
                    <button class="modal-btn" id="cancel-patch-btn">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="settings-modal hidden">
        <div class="settings-overlay"></div>
        <div class="settings-panel">
            <div class="settings-header">
                <span class="settings-title">┌─[ SETTINGS ]────────────────────────────┐</span>
                <button class="settings-close" id="settings-close">&times;</button>
            </div>
            <div class="settings-tabs">
                <button class="settings-tab active" data-settings-tab="general">General</button>
                <button class="settings-tab" data-settings-tab="debug">Debug</button>
            </div>
            <div class="settings-content">
                <!-- General Tab -->
                <div class="settings-tab-content active" id="settings-tab-general">
                <!-- General Settings -->
                <div class="settings-section">
                    <h3>General</h3>
                    <div class="setting-row">
                        <label for="setting-enabled">Inspector Enabled</label>
                        <input type="checkbox" id="setting-enabled" checked>
                    </div>
                    <div class="setting-row">
                        <label for="setting-update-interval">Update Interval (ticks)</label>
                        <input type="number" id="setting-update-interval" min="1" max="100" value="3">
                    </div>
                    <div class="setting-row">
                        <label for="setting-max-cached">Max Cached Entities</label>
                        <input type="number" id="setting-max-cached" min="100" max="50000" value="5000">
                    </div>
                    <div class="setting-row">
                        <label for="setting-pause-on-expand">Auto-pause on Expand</label>
                        <input type="checkbox" id="setting-pause-on-expand" checked>
                        <span class="setting-hint">Automatically pause when expanding fields</span>
                    </div>
                </div>

                <!-- Entity Filters -->
                <div class="settings-section">
                    <h3>Entity Filters</h3>
                    <div class="setting-row">
                        <label for="setting-include-npcs">Include NPCs</label>
                        <input type="checkbox" id="setting-include-npcs" checked>
                    </div>
                    <div class="setting-row">
                        <label for="setting-include-players">Include Players</label>
                        <input type="checkbox" id="setting-include-players" checked>
                    </div>
                    <div class="setting-row">
                        <label for="setting-include-items">Include Items</label>
                        <input type="checkbox" id="setting-include-items">
                    </div>
                </div>

                <!-- Packet Log Settings -->
                <div class="settings-section">
                    <h3>Packet Log</h3>
                    <div class="setting-row">
                        <label for="setting-packet-enabled">Packet Logging Enabled</label>
                        <input type="checkbox" id="setting-packet-enabled" checked>
                    </div>
                    <div class="setting-row">
                        <label for="setting-packet-excluded">Excluded Packets</label>
                        <input type="text" id="setting-packet-excluded" placeholder="EntityUpdates, CachedPacket">
                        <span class="setting-hint">Comma-separated packet names</span>
                    </div>
                </div>

                <!-- WebSocket Settings (read-only info) -->
                <div class="settings-section">
                    <h3>WebSocket (Read Only)</h3>
                    <div class="setting-row">
                        <label>Port</label>
                        <span id="setting-ws-port" class="setting-value">8765</span>
                    </div>
                    <div class="setting-row">
                        <label>Bind Address</label>
                        <span id="setting-ws-address" class="setting-value">127.0.0.1</span>
                    </div>
                    <div class="setting-row">
                        <label>Max Clients</label>
                        <span id="setting-ws-max-clients" class="setting-value">10</span>
                    </div>
                </div>
                </div><!-- /settings-tab-general -->

                <!-- Debug Tab -->
                <div class="settings-tab-content" id="settings-tab-debug">
                <div class="settings-section">
                    <h3>Tick Systems</h3>
                    <span class="setting-hint">Continuous systems that run every tick</span>
                    <div class="setting-row">
                        <label for="setting-debug-position-tracking">Position Tracking</label>
                        <input type="checkbox" id="setting-debug-position-tracking" checked>
                    </div>
                    <div class="setting-row">
                        <label for="setting-debug-entity-lifecycle">Entity Lifecycle</label>
                        <input type="checkbox" id="setting-debug-entity-lifecycle" checked>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>On-Demand Features</h3>
                    <span class="setting-hint">Triggered by MCP/client requests</span>
                    <div class="setting-row">
                        <label for="setting-debug-on-demand-refresh">On-Demand Refresh</label>
                        <input type="checkbox" id="setting-debug-on-demand-refresh" checked>
                    </div>
                    <div class="setting-row">
                        <label for="setting-debug-alarm-inspection">Alarm Inspection</label>
                        <input type="checkbox" id="setting-debug-alarm-inspection" checked>
                    </div>
                    <div class="setting-row">
                        <label for="setting-debug-timer-inspection">Timer Inspection</label>
                        <input type="checkbox" id="setting-debug-timer-inspection" checked>
                    </div>
                    <div class="setting-row">
                        <label for="setting-debug-instruction-inspection">Instruction Inspection</label>
                        <input type="checkbox" id="setting-debug-instruction-inspection" checked>
                    </div>
                    <div class="setting-row">
                        <label for="setting-debug-lazy-expansion">Lazy Expansion</label>
                        <input type="checkbox" id="setting-debug-lazy-expansion" checked>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Heavy Features</h3>
                    <span class="setting-hint">Resource-intensive subsystems</span>
                    <div class="setting-row">
                        <label for="setting-debug-asset-browser">Asset Browser</label>
                        <input type="checkbox" id="setting-debug-asset-browser" checked>
                    </div>
                    <div class="setting-row">
                        <label for="setting-debug-patch-management">Patch Management</label>
                        <input type="checkbox" id="setting-debug-patch-management" checked>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Dangerous Features</h3>
                    <span class="setting-hint">Actions that modify game state</span>
                    <div class="setting-row">
                        <label for="setting-debug-entity-actions">Entity Actions</label>
                        <input type="checkbox" id="setting-debug-entity-actions" checked>
                    </div>
                </div>
                </div><!-- /settings-tab-debug -->
            </div>
            <div class="settings-footer">
                <button class="settings-btn" id="settings-apply">Apply Changes</button>
                <button class="settings-btn secondary" id="settings-cancel">Cancel</button>
                <span class="settings-status" id="settings-status"></span>
            </div>
        </div>
    </div>

    <!-- Info Popover -->
    <div id="info-popover" class="info-popover hidden">
        <div class="info-popover-header">
            <span class="info-popover-title"></span>
            <button class="info-popover-close">&times;</button>
        </div>
        <div class="info-popover-content"></div>
    </div>

    <script src="app.js"></script>
</body>
</html>
